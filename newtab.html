<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <div class="scanline-overlay"></div>

  <div class="terminal">
    <!-- ══════ TOP BAR ══════ -->
    <header class="top-bar">
      <span class="top-bar-left">
        <span class="top-accent">▲</span> terminal-home <span class="top-dim">v1.0.0</span>
      </span>
      <span class="top-bar-right">
        <span id="top-bar-clock" class="top-dim">--:--:--</span>
        <button id="btn-theme" class="theme-toggle" title="Toggle theme">☀</button>
        <button id="btn-settings" class="top-btn" title="Settings (Ctrl+,)">⚙</button>
      </span>
    </header>

    <!-- ══════ MAIN GRID ══════ -->
    <main class="grid" id="panel-grid">

      <!-- ── SEARCH (fixed, not draggable) ── -->
      <section class="panel panel-search" style="--i:0">
        <div class="panel-bar">
          <span class="panel-icon">$</span>
          <span class="panel-name">search.sh</span>
        </div>
        <div class="panel-body">
          <div class="prompt-line">
            <span class="prompt">
              <span class="p-user" id="prompt-user">visitor</span><span class="p-at">@</span><span class="p-host">home</span><span class="p-colon">:</span><span class="p-tilde">~</span><span class="p-dollar">$</span>
            </span>
            <input type="text" id="search-input" spellcheck="false" autocomplete="off" autofocus>
          </div>
          <div class="search-meta">
            <span class="search-hint">Press Enter to search</span>
            <span class="search-engine-badge" id="search-engine-badge">Google</span>
          </div>
        </div>
      </section>

      <!-- ── Draggable panels ── -->
      <section class="panel panel-clock drag-panel" data-panel-id="clock" draggable="true" style="--i:1">
        <div class="panel-bar drag-handle">
          <span class="panel-icon">◆</span>
          <span class="panel-name">clock.sys</span>
          <span class="drag-hint">⠿</span>
        </div>
        <div class="panel-body clock-body">
          <div class="clock-time" id="clock-time">00:00:00</div>
          <div class="clock-date" id="clock-date">loading...</div>
          <div class="clock-lunar" id="clock-lunar"></div>
        </div>
      </section>

      <section class="panel panel-ip drag-panel" data-panel-id="ip" draggable="true" style="--i:2">
        <div class="panel-bar drag-handle">
          <span class="panel-icon">⌘</span>
          <span class="panel-name">netstat</span>
          <span class="drag-hint">⠿</span>
          <button class="panel-action" id="btn-refresh-ip" title="Refresh">↻</button>
        </div>
        <div class="panel-body">
          <div class="ip-section">
            <div class="ip-section-label">// EXIT NODE (Proxy/VPN)</div>
            <div id="ip-proxy-info">
              <div class="ip-row"><span class="ip-label">status</span><span class="ip-value dim">resolving...</span></div>
            </div>
          </div>
          <div class="ip-divider"></div>
          <div class="ip-section">
            <div class="ip-section-label">// DOMESTIC EXIT (国内出口)</div>
            <div id="ip-domestic-info">
              <div class="ip-row"><span class="ip-label">status</span><span class="ip-value dim">resolving...</span></div>
            </div>
          </div>
        </div>
      </section>

      <section class="panel panel-market drag-panel" data-panel-id="market" draggable="true" style="--i:3">
        <div class="panel-bar drag-handle">
          <span class="panel-icon">◈</span>
          <span class="panel-name">market.dat</span>
          <span class="drag-hint">⠿</span>
          <button class="panel-action" id="btn-refresh-market" title="Refresh">↻</button>
        </div>
        <div class="panel-body">
          <!-- Search & add -->
          <div class="market-search-box">
            <input type="text" id="market-search-input" class="market-search-input" placeholder="search asset (e.g. bitcoin, sol)..." spellcheck="false">
            <div id="market-search-results" class="market-search-results hidden"></div>
          </div>
          <table class="market-table">
            <thead>
              <tr>
                <th class="col-asset">ASSET</th>
                <th class="col-price">PRICE</th>
                <th class="col-change">24H</th>
                <th class="col-action"></th>
              </tr>
            </thead>
            <tbody id="market-body">
              <tr class="market-loading"><td colspan="4">fetching data...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="panel panel-shortcuts drag-panel" data-panel-id="shortcuts" draggable="true" style="--i:4">
        <div class="panel-bar drag-handle">
          <span class="panel-icon">⟩</span>
          <span class="panel-name">links.conf</span>
          <span class="drag-hint">⠿</span>
          <button class="panel-action" id="btn-add-shortcut" title="Add link">+</button>
        </div>
        <div class="panel-body">
          <div id="shortcuts-list"></div>
        </div>
      </section>

    </main>

    <!-- ══════ STATUS BAR ══════ -->
    <footer class="status-bar">
      <span class="status-left">
        <span class="status-dot" id="status-dot">●</span>
        <span id="status-text">READY</span>
      </span>
      <span class="status-right">
        <span class="status-key">/</span> search
        <span class="status-sep">│</span>
        <span class="status-key">Ctrl+,</span> settings
      </span>
    </footer>
  </div>

  <!-- ══════ SETTINGS MODAL ══════ -->
  <div id="settings-overlay" class="settings-overlay hidden">
    <div class="settings-panel">
      <div class="panel-bar">
        <span class="panel-icon">⚙</span>
        <span class="panel-name">settings.conf</span>
        <button class="panel-action" id="btn-close-settings" title="Close">&times;</button>
      </div>
      <div class="settings-body">

        <!-- Username -->
        <div class="setting-section">
          <div class="setting-header"># General</div>
          <div class="setting-row">
            <label class="setting-label">username</label>
            <input type="text" id="s-username" class="setting-input" placeholder="visitor">
          </div>
          <div class="setting-row">
            <label class="setting-label">search_engine</label>
            <select id="s-search-engine" class="setting-select">
              <option value="google">Google</option>
              <option value="bing">Bing</option>
              <option value="duckduckgo">DuckDuckGo</option>
              <option value="baidu">Baidu</option>
            </select>
          </div>
          <div class="setting-row">
            <label class="setting-label">clock_format</label>
            <select id="s-clock-format" class="setting-select">
              <option value="en">English</option>
              <option value="zh">中文 (含农历)</option>
            </select>
          </div>
        </div>

        <!-- Shortcuts -->
        <div class="setting-section">
          <div class="setting-header"># Shortcuts</div>
          <div id="s-shortcuts-editor"></div>
          <button class="btn-terminal" id="s-add-category">+ add_category</button>
        </div>

        <!-- Market -->
        <div class="setting-section">
          <div class="setting-header"># Market Watchlist</div>
          <div id="s-market-editor"></div>
          <div class="setting-row add-ticker-row">
            <select id="s-ticker-preset" class="setting-select">
              <option value="">-- select ticker --</option>
              <option value="bitcoin|BTC|Bitcoin">Bitcoin (BTC)</option>
              <option value="ethereum|ETH|Ethereum">Ethereum (ETH)</option>
              <option value="solana|SOL|Solana">Solana (SOL)</option>
              <option value="pax-gold|GOLD|Gold">Gold (PAXG)</option>
              <option value="ripple|XRP|Ripple">Ripple (XRP)</option>
              <option value="dogecoin|DOGE|Dogecoin">Dogecoin (DOGE)</option>
              <option value="cardano|ADA|Cardano">Cardano (ADA)</option>
              <option value="chainlink|LINK|Chainlink">Chainlink (LINK)</option>
              <option value="avalanche-2|AVAX|Avalanche">Avalanche (AVAX)</option>
              <option value="polkadot|DOT|Polkadot">Polkadot (DOT)</option>
              <option value="tether-gold|XAUT|Gold(Tether)">Gold - Tether (XAUT)</option>
            </select>
            <button class="btn-terminal" id="s-add-ticker">+ add</button>
          </div>
          <div class="setting-row custom-ticker-row">
            <input type="text" id="s-custom-id" class="setting-input" placeholder="coingecko_id">
            <input type="text" id="s-custom-symbol" class="setting-input" placeholder="SYMBOL">
            <button class="btn-terminal" id="s-add-custom-ticker">+ custom</button>
          </div>
        </div>

        <!-- Actions -->
        <div class="setting-actions">
          <button class="btn-terminal btn-save" id="s-save">[ save ]</button>
          <button class="btn-terminal btn-cancel" id="s-cancel">[ cancel ]</button>
        </div>

      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
